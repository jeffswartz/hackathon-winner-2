(function(){var a;a=window.TBB=Ember.Application.create(),function(){a.ChatWidgetComponent=Ember.Component.extend({yOffset:window.pageYOffset,setYOffset:function(){return this.set("yOffset",window.pageYOffset)},shouldChatStick:function(){return this.get("yOffset")>75}.property("yOffset"),didInsertElement:function(){var a;return $(window).on("scroll",$.proxy(this.setYOffset,this)),OTCS.setStrings({"In the queue":"","Approx wait":"","$time mins":"Waiting For Advisor"}),a=!1,$.get("https://otcsf.herokuapp.com/app/createCustomer",function(b){var c,d,e;return c=$(".chat-widget"),c.html(""),OT.Archive.prototype.destroy=function(){},d=OTCS.initCustomer(b.apiKey,b.sessionId,b.token,{showTextChat:!1,element:$(".chat-widget")[0]}),e=function(){return $.get("https://otcsf.herokuapp.com/is-archive-ready/"+b.customerId,function(b){return console.log("polling..."),console.log(b),b&&b.name&&(a||(a=!0,OTCSF.addArchive({title:b.name.split("#####")[0],time:b.createdAt})),b.url&&b.url.length>10)?(OTCSF.archiveReady({url:b.url,duration:1e3*b.duration}),console.log("Archive is ready"),clearInterval(pollInterval)):void 0})},d.on("state",function(a){var b;return"connected"===a.state?b=setInterval(e,2e3):void 0}),d.sharedData.on("changed:meeting",function(a){return console.log("New Meeting from rep! Check console to view details"),console.log(a),OTCSF.showNewMeeting(a)}),d.sharedData.on("changed:sharedContent",function(a){return console.log("New Shared Content from rep!!!"),console.log(a),window.OTCSF.addSharedContent(a)})})}})}.call(this),function(){var b,c,d,e;a.DatePickerComponent=Ember.Component.extend({didInsertElement:function(){var a,b,d=this;return b=this.enablePicking?null:"0,1,2,3,4,5,6",a=this.$(".date-picker").datepicker({keyboardNavigation:!1,daysOfWeekDisabled:b}),c(this.meetings),a.on("changeMonth",function(){return setTimeout(function(){return c(d.meetings,d.ignoreToday)},50)}),a.on("click",function(){return setTimeout(function(){return c(d.meetings,!0)},1)})},observeMeetings:function(){return c(this.meetings,this.ignoreToday)}.observes("meetings.@each")}),c=function(a,c){return b(),c||d(),a.forEach(function(a){var b,c;return c=moment(a.time).format("MMMM YYYY"),c===$($(".datepicker-switch")[0]).text()?(b=moment(a.time).format("DD"),$(".day:not(.new):not(.old)").each(function(a,c){return $(c).text()===b?$(c).addClass("meeting"):void 0})):void 0})},e=function(){return $(".datepicker .active").removeClass("active")},b=function(){},d=function(){var a,b;return b=moment().format("MMMM YYYY"),b===$($(".datepicker-switch")[0]).text()?(a=moment().format("DD"),$(".day:not(.new):not(.old)").each(function(b,c){return parseInt($(c).text())===parseInt(a)?$(c).addClass("active"):void 0})):void 0}}.call(this),function(){a.RepChatWidgetComponent=Ember.Component.extend({didInsertElement:function(){var a,b,c;return a=!1,b=window.location.href.split("?"),c="Scott",b.length>1&&(c=b[1]),$.get("https://otcsf.herokuapp.com/app/createRep/"+c,function(b){var c,d;return c=$(".portfolio-review-image"),c.html(""),OT.Archive.prototype.destroy=function(){},window.OTCSF.otcs=OTCS.initRep(b.apiKey,b.sessionId,b.token,{showTextChat:!1,showInviteFlow:!0,element:$(".portfolio-review-image")[0]}),d=function(){var b;return console.log("polling archive, customer info"),window.OTCSF.otcs.customer&&window.OTCSF.otcs.customer.id?(console.log(window.OTCSF.otcs.customer),console.log(window.OTCSF.otcs.customer.id),b=window.OTCSF.otcs.customer.id,$.get("https://otcsf.herokuapp.com/is-archive-ready/"+b,function(b){return console.log("polling..."),console.log(b),b&&b.name&&(a||(a=!0,OTCSF.addArchive({title:b.name.split("#####")[0],time:b.createdAt})),b.url&&b.url.length>10)?(OTCSF.archiveReady({url:b.url,duration:1e3*b.duration}),console.log("Archive is ready"),clearInterval(pollInterval)):void 0})):void 0},window.OTCSF.otcs.on("state",function(a){var b;return"connected"===a.state?b=setInterval(d,2e3):void 0})})}})}.call(this),function(){a.SelectPickerComponent=Ember.Component.extend({didInsertElement:function(){return $("#"+this.selectId).selectpicker()}})}.call(this),function(){Ember.Handlebars.helper("monthDateYear",function(a){return moment(a).format("MMMM DD, YYYY")}),Ember.Handlebars.helper("hourMinuteSecond",function(a){return moment(a).format("hh:mm:ss a")}),Ember.Handlebars.helper("dayTime",function(a){return moment(a).format("MM/DD/YYYY, hh:mma")}),Ember.Handlebars.helper("minutes",function(a){return moment(a).format("mm:ss")+" min"}),Ember.Handlebars.helper("highlight",function(a){var b;return b=Handlebars.Utils.escapeExpression(a),new Handlebars.SafeString('<span class="highlight">'+b+"</span>")}),Ember.Handlebars.helper("meetingTime",function(a){return moment(a).isSame(+new Date,"day")?a="Today, "+moment(a).format("hh:mm")+" PST":moment(a).format("MM/DD/YY")})}.call(this),function(){var b,c,d,e;a.AccountController=Em.ObjectController.extend({needs:["application"],sharedContent:[],isSharedContentOpen:!0,firstMeeting:function(){return this.get("meetings")[0]}.property("meetings"),meetings:[{title:"Portfolio Review 2013",rep:{id:"Scott",name:"Scott Small"},time:moment("01:30pm","hh:mma"),isToday:!0},{title:"Investment Tips Session",rep:{id:"Scott",name:"Scott Small"},time:1392903e6},{title:"401k Updates",rep:{id:"Scott",name:"Scott Small"},time:13974822e5}],archives:[{title:"401k Update",time:1384416e6,url:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",duration:1339e3},{title:"Portfolio Review",time:1371043282e3,url:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",duration:754e3},{title:"Portfolio Updates",time:13638492e5,url:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",duration:552e3}],chat:!1,showMeeting:function(){var a;return a=this.get("newMeeting"),a?$("#meetingModal").modal("show"):void 0}.observes("newMeeting"),actions:{startChat:function(){return window.startOTSession()},showSharedContent:function(){return $("#sharedContent").collapse("show"),this.set("isSharedContentOpen",!0)},hideSharedContent:function(){return $("#sharedContent").collapse("hide"),this.set("isSharedContentOpen",!1)}},setOTCSF:function(){var a=this;return window.OTCSF={},window.OTCSF.addSharedContent=function(b){var c;return c=[{url:"http://i.imgur.com/YrkHK2r.png"}],c=0===b?[{title:"The U.Fund College Investing Plan Performance",url:"images/graph_1.png"}]:[{title:"UNIQUE College Investing Plan Performance",url:"images/graph_2.png"}],a.set("sharedContent",c)},window.OTCSF.startChat=function(b){return a.set("chat",b)},window.OTCSF.showNewMeeting=function(b){var c,d;return b.isToday=moment(b.time).format("DDMMMYYYY")===moment().format("DDMMMYYYY")?!0:!1,c=a.get("meetings"),c.pushObject(b),d=e(c),a.set("meetings",d),a.set("newMeeting",b)},window.OTCSF.addArchive=function(b){var c;return c=a.get("archives").toArray(),c.unshiftObject(b),a.set("archives",c),a.set("archivePending",!0)},window.OTCSF.archiveReady=function(b){var c;return c=a.get("archives").toArray(),c[0].url=b.url,c[0].duration=b.duration,a.set("archives",c),a.set("archivePending",!1)}}.observes("model"),archivePending:!1,totalCash:"127,559.33",totalEquity:"141,112.96",totalFixed:"164,832.21",totalRetirement:"198,451.43"}),d=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},b={address:["Cash deposit ATM","Cash deposit teller"],num:["Check deposit","Electronic transfer"]},c={address:["Withdrawal ATM","Withdrawal Teller"],num:["VISA","MasterCard"]},e=function(a){var b,c,d,f;if(0===a.length)return[];for(f=[],b=[],c=a[0],d=1;d<a.length;)a[d].time<c.time?b.push(a[d]):f.push(a[d]),d++;return e(b).concat(c,e(f))}}.call(this),function(){var b,c,d;a.ApplicationController=Em.ObjectController.extend({archiveVideoUrl:null,stocks:[{title:"Dow",price:"15,821.63",change:"+70.96",percentage:"0.45%"},{title:"Nasdaq",price:"3,965.58",change:"+45.66",percentage:"1.16%"},{title:"S&P 500",price:"1,782.00",change:"+14.31",percentage:"0.81%"}],actions:{showArchiveEntry:function(a){return $("#myModal").modal("show"),this.set("archiveVideoUrl",a.url)}},cashTransactions:function(){var a,b,c,d,e,f;return b=this.get("totalCash"),e=null,c=12e4,d=16e4,f=19e4,a=[1,2,3,4,5].map(function(a,c){var d,e,f,g;switch(e=moment().subtract("days",c*c).format("MM/DD/YYYY"),c){case 0:g="Check deposit #844",f=!1,d="1,543.50",b="127,559.33",e="11/14/2013";break;case 1:g="VISA 1234",f=!0,d="2,457.87",b="126,015.83",e="11/13/2013";break;case 2:g="Cash deposit ATM",f=!1,d="1,000.00",b="128,473.70",e="11/10/2013";break;case 3:g="Withdrawal",f=!0,d="200.00",b="127,473.70",e="11/05/2013";break;case 4:g="Check deposit #843",f=!1,d="2,150.00",b="127,673.70",e="10/29/2013"}return{date:e,info:g,debt:f,amount:d,total:b}})}.property(),equityTransactions:function(){var a;return a=[{subtext:"Reinvestment",info:"Vanguard Russell 2000 ETF (VTWO)",date:"11/14/2013",debt:!0,amount:"4,794.00",total:"141,112.96"},{subtext:"Dividend received",info:"SPDR S&P 600 Small Cap ETF (SLY)",date:"11/13/2013",debt:!1,amount:"6,335.00",total:"145,906.96"},{subtext:"Long-term cap gain",info:"T. Rowe Price Institutional Large Cap Growth Fund (TRLGX)",date:"11/10/2013",debt:!1,amount:"8,392.12",total:"139,571.96"},{subtext:"Long-term cap gain",info:"Fidelity Focused Stock Fund (FTQGX)",date:"11/05/2013",debt:!1,amount:"10,832.00",total:"131,179.84"}]}.property(),fixedTransactions:function(){var a;return a=[{info:"Peritus High Yield ETF (HYLD)",date:"11/19/2013",debt:!1,amount:"3,155.00",total:"164,832.31"},{info:"ProShares UltraPro Sht 20+ Yr Treas (TTT)",date:"11/14/2013",debt:!1,amount:"8,765.10",total:"161,677.21"},{info:"Guggenhm BltShs 2015 HY Corp Bd ETF (BSJF)",date:"11/10/2013",debt:!1,amount:"1,100.00",total:"152,912.21"},{info:"PIMCO 0-5 Year Hi Yield Corp Bd Idx (HYS)",date:"11/05/2013",debt:!1,amount:"2,342.17",total:"151,812.21"}]}.property(),retirementTransactions:function(){var a;return a=[{info:"TIAA-CREF Lifecycle Retirement Income Fund (TLRIX)"},{info:"Vanguard Target Retirement Income (VTINX)"}]}.property()}),d=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},b={address:["Cash deposit ATM","Cash deposit teller"],num:["Check deposit","Electronic transfer"]},c={address:["Withdrawal ATM","Withdrawal Teller"],num:["VISA","MasterCard"]}}.call(this),function(){a.HomeController=Em.ObjectController.extend({needs:["application"],password:"abc1234",passwordError:!1,email:"ian@company.com",emailError:!1,actions:{login:function(){var a,b;return a=this.get("email"),b=this.get("password"),a&&b?($("#emailInputHolder").popover("hide"),$("#passwordInputHolder").popover("hide"),this.transitionToRoute("account")):(a?$("#emailInputHolder").popover("hide"):($("#emailInputHolder").popover(),$("#emailInputHolder").popover("show")),b?$("#passwordInputHolder").popover("hide"):($("#passwordInputHolder").popover(),$("#passwordInputHolder").popover("show"),console.log("no password")))}}})}.call(this),function(){var b;a.RepController=Em.ObjectController.extend({needs:["application"],sharedContent:[Ember.Object.create({title:"The U.Fund College Investing Plan Performance",graph:"images/graph_1.png",isSelected:!0,timeShared:moment().format("MMMM DD,YYYY, hh:mma")+" PST"}),Ember.Object.create({title:"UNIQUE College Investing Plan Performance",graph:"images/graph_2.png",isSelected:!1,timeShared:null})],firstMeeting:function(){return this.get("meetings")[0]}.property("meetings"),meetings:[{title:"Portfolio Review 2013",rep:{id:"Scott",name:"Scott"},time:moment("01:30pm","hh:mma"),isToday:!0},{title:"Investment Tips Session",rep:{id:"Scott",name:"Scott"},time:1392903e6},{title:"401k Updates",rep:{id:"Scott",name:"Scott"},time:13974822e5}],archives:[{title:"401k Update",time:1384416e6,url:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",duration:1339e3},{title:"Portfolio Review",time:1371043282e3,url:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",duration:754e3},{title:"Portfolio Updates",time:13638492e5,url:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4",duration:552e3}],selectedFund:0,selectedFundObserver:function(){var a;return a=this.get("selectedFund"),this.get("sharedContent").forEach(function(b,c){return b.set("isSelected",c===a),b})}.observes("selectedFund"),selectedFundUrl:function(){var a;return a=this.get("selectedFund"),this.get("sharedContent")[a].graph}.property("selectedFund"),selectedFundTitle:function(){var a;return a=this.get("selectedFund"),this.get("sharedContent")[a].title}.property("selectedFund"),sharedFundIndex:0,sharedFund:function(){var a;return a=this.get("sharedFundIndex"),this.get("sharedContent")[a]}.property("sharedFundIndex"),times:function(){var a;return a=[7,8,9,10,11,12,13,14,15,16,17,18],a.map(function(a){return moment().hour(a).format("ha")})}.property(),selectedTime:null,meetingTitle:null,isScheduleOpen:!0,isPreviewSessionOpen:!0,isAccountOverviewOpen:!0,isRecommendedFundsOpen:!0,setOTCSF:function(){var a=this;return window.OTCSF={},window.OTCSF.addAdvisors=function(){return console.log("adding advisors")},window.OTCSF.inviteAdvisor=function(a){return console.log("inviting advisor "+a)},window.OTCSF.sendSharedContent=function(a){return window.OTCSF.otcs&&window.OTCSF.otcs.sharedData&&(console.log("sending data"),window.OTCSF.otcs.sharedData.set("sharedContent",a)),console.log("models ready to be sent:",a)},window.OTCSF.sendMeeting=function(a){return window.OTCSF.otcs&&window.OTCSF.otcs.sharedData&&(console.log("sending data"),window.OTCSF.otcs.sharedData.set("meeting",a)),console.log("meetings ready to be sent:",a)},window.OTCSF.addArchive=function(b){var c;return c=a.get("archives").toArray(),c.unshiftObject(b),a.set("archives",c),a.set("archivePending",!0)},window.OTCSF.archiveReady=function(b){var c;return c=a.get("archives").toArray(),c[0].url=b.url,c[0].duration=b.duration,a.set("archives",c),a.set("archivePending",!1)}}.observes("model"),archivePending:!1,actions:{selectFund:function(a){return this.set("selectedFund",a)},openScheduleContainer:function(){return $("#scheduleContainer").collapse("show"),this.set("isScheduleOpen",!0)},hideScheduleContainer:function(){return $("#scheduleContainer").collapse("hide"),this.set("isScheduleOpen",!1)},openPreviewSessions:function(){return $("#previousSessionContainer").collapse("show"),this.set("isPreviewSessionOpen",!0)},hidePreviewSessions:function(){return $("#previousSessionContainer").collapse("hide"),this.set("isPreviewSessionOpen",!1)},openAccountOverview:function(){return $("#accountOverviewContainer").collapse("show"),this.set("isAccountOverviewOpen",!0)},hideAccountOverview:function(){return $("#accountOverviewContainer").collapse("hide"),this.set("isAccountOverviewOpen",!1)},openRecommendedFunds:function(){return $("#recommendedFundsContainer").collapse("show"),this.set("isRecommendedFundsOpen",!0)},hideRecommendedFunds:function(){return $("#recommendedFundsContainer").collapse("hide"),this.set("isRecommendedFundsOpen",!1)},selectFund:function(a){return this.set("selectedFund",a)},shareContent:function(){var a,b,c;return a=this.get("selectedFund"),this.set("sharedFundIndex",a),b=this.get("sharedFund"),c=moment().format("MMMM DD,YYYY, hh:mma")+" PST",b.set("timeShared",c),window.OTCSF.sendSharedContent(a)},scheduleMeeting:function(){var a,c,d,e,f,g,h,i,j,k;return c=$("td.active").text(),i=$(".datepicker-switch")[0].innerText,console.log(i),d=c?c+moment(i,"MMMM YYYY").format("MMMYYYY"):moment().format("DDMMMYYYY"),console.log(d),e=d===moment().format("DDMMMYYYY"),j=this.get("selectedTime"),j=$(".time-picker .filter-option").text(),a=d+" "+j,g=+moment(a,"DDMMMYYYY,ha"),f={title:this.get("meetingTitle"),time:g,rep:{id:"Ian",name:"Ian Small"},isToday:e},h=this.get("meetings"),h.pushObject(f),k=b(h),this.set("meetings",k),window.OTCSF.sendMeeting(f)}}}),b=function(a){var c,d,e,f;if(0===a.length)return[];for(f=[],c=[],d=a[0],e=1;e<a.length;)a[e].time<d.time?c.push(a[e]):f.push(a[e]),e++;return b(c).concat(d,b(f))}}.call(this),function(){a.Store=DS.Store.extend(),a.ApplicationAdapter=DS.FixtureAdapter}.call(this),function(){a.AccountRoute=Em.Route.extend({model:function(){return{oneWeekAgo:moment().subtract("days",7)}}}),a.RepRoute=Em.Route.extend({model:function(){return{oneWeekAgo:moment().subtract("days",7)}}})}.call(this),function(){a.ApplicationView=Em.View.extend({didInsertElement:function(){var a=this;return console.log("insert element"),this.$(".modal-table").on("click",function(a){return"video"!==a.toElement.localName?($("#myModal").modal("hide"),$("#previewModalVideo")[0].pause()):void 0}),$(window).resize(function(){return a.$(".modal-table").height(window.innerHeight)})}})}.call(this),function(){a.Router.map(function(){var a;return a=/rep/g.exec(window.location.pathname)?"rep":"home",this.route(a,{path:"/"}),this.route("account",{path:"/account"}),this.route("rep",{path:"/rep"}),this.route("about",{path:"/about"})})}.call(this)}).call(this);